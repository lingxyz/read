# read-cleancoder
📒 《架构整洁之道》读书笔记

## 推荐序一

```
程序员的三个层次：
  - 普通程序员：能让程序跑起来，正确处理业务流程和对数据进行计算，会写代码
  - 工程师：有“洁癖”、有工匠精精、有修养的程序员。
    - 怎么做：用工程的方法来编写代码，以便让编程开发更为高效和快速。
        - 工程的方法：把编程当成一种设计，把代码模块化，让这些模块可以更容易地交互拼装和组织，让代码排列整齐
    - 解决了什么问题：使用各种各样的手段和技术不断提高代码的易读性、可扩展性、可维护性和重用性。
  - 架构师：高智商、经验足、不怕难，挑战复杂系统的问题，引领着整个行业前行。
      - 解决了什么问题：问题繁殖和进化，解决1个问题引发多个问题；问题的多少和系统的复杂度成指数型正比。

 观点（左耳朵耗子）：
 无论微观代码、宏观架构、三种编程范式、微服务架构，都在解决同一个问题：分离控制和逻辑。
   - 控制：是对程序流转的与业务逻辑无关的代码或系统的控制（如多线程、异步、服务发现、部署、弹性伸缩等）
   - 逻辑：是实实在在的业务逻辑，是解决用户问题的逻辑。控制和逻辑构成了整体的软件复杂度，有效地分离控制和逻辑会让你的系统得到最大的简化。
```

## 推荐序二

```
举例：蓝绿部署：
    - 内容：用代理分离请求，A组为核心功能（程序基本不更新）、B组为外围请求（程序随业务更新）
    - 核心：动静分离
    - 结合工作：冷热分离、动静分离、读写分离...

所谓架构就是“用最小的人力成本来满足构建和维护系统需求”的设计行为。
    - 无论以前的面向对象系统和现在的分布式系统，在这一点上完全一致。
    - 架构设计思想可以穿越时空，无论在过去还是现在同样适用。
    - 从这种古老的视角看问题，往往更能摆脱细节的困扰，把握问题的核心。正如老子“治大国如烹小鲜。”
        - 作者举了面向对象编程、函数式编程、分布式系统、微服务架构来论证此观点

如果又要保证操作原子性又要能精确还原各时刻的状态？
    - 只提供CR操作，而不提供完整的CRUD操作（就像MySQL的binlog那样）。
    - 平时只要追加操作记录即可，各时刻的状态永远通过重放之前的操作记录得出，这样就彻底避免了状态的错乱。
```

## 序言
```
软件架构（architecture）究竟是什么？
软件架构学关注的的一个重点是组织结构（structure）
软件项目是具有递归（recursive）和分形（fractal）特点的，最终都要由一行行的代码组成。
    - 大型软件项目往往是由小的软件组件构成的，这些软件组件又是由更小的软件组件构成的，层层堆叠，无穷无尽。
软件开发比修建物理建筑需要更长、更专注的设计过程，软件架构师应该比建筑架构师更懂架构！
走快的唯一方法是先走好。
```

## 前言
```
历经多应用、多系统的构建过程，作者的领悟：软件架构的规则是相同的！
为什么？作者的结论：软件架构规则和其他变量完全无关。软件架构规则是永恒不变的。
    - 今天的软件与过去的软件本质上仍然是一样的，仍然是顺序结构、分支结构、循环结构的组合。
    - 计算机代码没有变化，软件架构的规则也就一直保持了一致。
        - 软件架构的规则其实就是排列组合代码块的规则。由于这些代码块本质上没有变化，因此排列组合它们的规则也就不会变化。
```

## 第1部分 概述

```
采用好的软件架构可以大大节省软件项目构建与维护的人力成本。
让每次变更都短小简单，易于实施，并且避免缺陷，用最小的成本，最大程度地满足功能性和灵活性的要求。
```

### 第1章 设计与架构究竟是什么

```
架构与设计的区别：二者没有任何区别。一丁点区别都没有！
底层设计细节和高层架构信息是不可分割的。它们组合在一起，共同定义了整个软件系统，缺一不可。

软件架构的终极目标是，用最小的人力成本来满足构建和维护该系统的需求。

举例揭示软件开发核心特点：要想跑得快，先要跑得稳。
扭转开发者观念，逃离过度自信。过度自信只会使得重构设计陷入和原项目一样的困局中。

本书主题：
要想提高自己软件架构的质量，就需要先知道什么是优秀的软件架构。
而为了在系统构建过程中采用好的设计和架构以便减少构建成本，提高生产力，又需要先了解系统架构的各种属性与成本和生产力的关系。
```

### 第2章 两个价值维度

```md
对于每个软件系统，我们都可以通过行为和架构两个维度来体现它的实际价值。

行为价值：即软件系统的行为。是最直观的价值维度。
  - 程序员的工作就是让机器按照某种指定方式运转，给系统的使用者创造或者提高利润。
架构价值：软件系统必须保持灵活。体现在"software"的"soft"上，软件系统必须足够软，容易被修改。
  - 好的系统架构设计应该尽可能做到与“形状”无关。（形状指的是需求拼图块）

软件研发人员应该确保自己的系统在这两个维度上的实际价值都能长时间维持在很高的状态。
只关注其中一个维度，还是错误的维度，会导致系统的价值最终趋降为零。

哪个维度更重要：
系统行为，是紧急的，但是并不总是特别重要。
系统架构，是重要的，但是并不总是特别紧急。

软件研发人员的坚持：
有成效的软件研发团队会迎难而上，毫不掩饰地与所有其他的系统相关方进行平等的争吵。
平衡系统架构的重要性与功能的紧急程度这件事，是软件研发人员自己的职责，而非业务团队。

请记住：
如果忽视软件架构的价值，系统将会变得越来越难以维护，终会有一天，系统将会变得再也无法修改。
如果系统变成了这个样子，说明软件开发团队没有和需求方做足够的抗争，没有完成自己应尽的职责。
```